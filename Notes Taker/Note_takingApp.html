<!DOCTYPE html>
<html lang="en">
<!--Here after using vs code's boiler plate ,below in css and js ive included bootstrap links which are necessary to provide fucntonality of classes as specified by bootstrap .TO get this links go to bootstrap.com->docs->scroll and u'll see css and js's links .Also u could use starter template which u could find on the same page & it has this css and js links already included-->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Notes App</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!--css bootstrap link-->
</head>

<body>
  <!-- navbar from bootstrap-->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <!--instead of dark u can use light class to make your navabr of white color -->
    <a class="navbar-brand" href="#">My Home-Coded Notes</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>

      </ul>
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" id="searchTxt" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>

  <!-- cards ,textarea and whole remaining body -->
  <div class="container my-3">
    <!--my-3 is a class suggesting 3px margin in y direction-->
    <!-- Section to add notes -->
    <h1>Welcome To Home-Coded Notes</h1>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Add Title</h5>
        <div class="mb-3">
            <input type="text" class="form-control" id="addTitle" placeholder="Ur Title">
          </div>
        <h5 class="card-title">Add Message</h5>
        <div class="form-group">
          <textarea class="form-control" id="addTxt" rows="3" placeholder="Ur Message"></textarea>
        </div>
        <button class="btn btn-primary" id="addBtn">Add Note</button>
      </div>
    </div>
    <hr>
    <!-- this is from where our display section of save/set/assigned notes starts -->
    <h1>Your Notes</h1>
    <hr>
    <!-- Here below we'll append cards as notes from js -->
    <div id="notes" class="row container-fluid"> </div>
  </div>

  <!-- js's bootstrap links -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script>
    // So that as our page loads we can show already set notes
    showNotes();

    // If user adds a note, add it to the localStorage
    let addBtn = document.getElementById("addBtn");
    addBtn.addEventListener("click", function (e) {
      let addTxt = document.getElementById("addTxt");
      let addTitle = document.getElementById("addTitle");
      let notes = localStorage.getItem("notes");
      if (notes == null) {
        notesObj = [];
      } else {
        notesObj = JSON.parse(notes);
      }
      let myObj ={
          title:addTitle.value,
          text:addTxt.value
      }
      notesObj.push(myObj);
      localStorage.setItem("notes", JSON.stringify(notesObj));
      addTxt.value = "";
      addTitle.value = "";
      //   console.log(notesObj);
      showNotes();
    });

    // Function to show elements from localStorage
    function showNotes() {
      let notes = localStorage.getItem("notes");
      if (notes == null) {
        notesObj = [];
      } else {
        notesObj = JSON.parse(notes);
      }
      let html = "";
      notesObj.forEach(function (element, index) {
        html += `
            <div class="noteCard my-2 mx-2 card" style="width: 18rem;">
                    <div class="card-body">
                        <h5 class="card-title">Note ${index + 1}: ${element.title}</h5>
                        <p class="card-text"> ${element.text}</p>
                        <button id="${index}" onclick="deleteNote(this.id)" class="btn btn-primary">Delete Note</button>
                    </div>
                </div>`;
      });
      let notesElm = document.getElementById("notes");
      if (notesObj.length != 0) {
        notesElm.innerHTML = html;
      } else {
        notesElm.innerHTML = `Nothing to show! Use "Add a Note" section above to add notes.`;
      }
    }

    // Function to delete a note
    function deleteNote(index) {
      let notes = localStorage.getItem("notes");
      if (notes == null) {
        notesObj = [];
      } else {
        notesObj = JSON.parse(notes);
      }

      notesObj.splice(index, 1);
      localStorage.setItem("notes", JSON.stringify(notesObj));
      showNotes();
    }

    // Search Functionality
    let search = document.getElementById('searchTxt');
    search.addEventListener("input", function () {
      let inputVal = search.value.toLowerCase();
      let noteCards = document.getElementsByClassName('noteCard');

      Array.from(noteCards).forEach(function (element) {
        let cardTxt = element.getElementsByTagName("p")[0].innerText;
        if (cardTxt.includes(inputVal)) {
          element.style.display = "block";
        }
        else {
          element.style.display = "none";
        }
      })
    })

    /*
    Further Features:
    1. Add Title
    2. Mark a note as Important
    3. Separate notes by user
    4. Sync and host to web server
    */
  </script>
</body>
</html>